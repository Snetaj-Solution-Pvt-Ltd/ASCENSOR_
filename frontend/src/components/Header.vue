<template>
    <!-- Header -->
    <header v-if="user" class="bg-blue-900 text-white p-4 flex justify-between items-center shadow-md">
        <!-- Logo Section -->
        <div class="flex items-center space-x-3">
            <svg class="w-[180px] h-auto object-contain" viewBox="0 0 1828 251" aria-hidden="true">
                <title>Ascensor - Digital Agency Leeds</title>
                <path
                    d="M1805.28 3.205c3.72 0 7.32.96 10.86 2.88 3.54 1.86 6.3 4.62 8.28 8.16 1.98 3.54 2.94 7.2 2.94 11.1 0 3.78-.96 7.44-2.88 10.98-1.98 3.48-4.68 6.24-8.22 8.16-3.48 1.98-7.14 2.94-10.98 2.94-3.84 0-7.5-.96-10.98-2.94-3.54-1.92-6.24-4.68-8.22-8.16-1.92-3.54-2.94-7.2-2.94-10.98 0-3.9 1.02-7.56 3-11.1s4.74-6.3 8.28-8.16c3.54-1.92 7.14-2.88 10.86-2.88zm0 3.66c-3.12 0-6.12.78-9.06 2.4-2.94 1.56-5.22 3.84-6.9 6.84-1.68 2.94-2.46 6-2.46 9.24 0 3.18.78 6.24 2.4 9.12 1.62 2.94 3.9 5.22 6.84 6.84s6 2.46 9.18 2.46c3.18 0 6.24-.84 9.18-2.46 2.94-1.62 5.22-3.9 6.84-6.84 1.62-2.88 2.4-5.94 2.4-9.12 0-3.24-.84-6.3-2.46-9.24-1.68-3-3.96-5.28-6.9-6.84-2.94-1.62-5.94-2.4-9.06-2.4zm-9.72 30.66v-23.76h8.22c2.76 0 4.8.18 6.06.66 1.26.42 2.22 1.2 3 2.28.72 1.08 1.08 2.28 1.08 3.48 0 1.74-.6 3.24-1.86 4.56-1.26 1.26-2.88 1.98-4.92 2.16.84.36 1.5.78 2.04 1.26.96.96 2.1 2.52 3.48 4.74l2.94 4.62h-4.74l-2.1-3.72c-1.62-2.94-3-4.8-4.02-5.58-.66-.54-1.68-.78-3.06-.78h-2.28v10.08h-3.84zm3.84-13.38h4.68c2.22 0 3.78-.3 4.56-1.02.84-.66 1.2-1.5 1.2-2.58 0-.72-.18-1.38-.54-1.92-.42-.54-.96-.96-1.68-1.26-.66-.24-1.98-.42-3.84-.42h-4.38v7.2zM406.492 183.553c0-9.37-3.263-16.899-9.788-22.589-6.525-5.689-17.987-11.043-34.385-16.062-28.11-8.477-49.443-18.461-64.001-29.952-14.556-11.488-21.836-27.16-21.836-47.017 0-19.966 8.199-36.279 24.597-48.942C317.476 6.332 338.392 0 363.825 0c26.993 0 48.717 6.806 65.172 20.413 16.452 13.611 24.399 31.457 23.844 53.544l-.335 1.004h-47.352c0-12.157-3.682-21.501-11.044-28.027s-17.681-9.788-30.954-9.788c-12.048 0-21.363 2.902-27.943 8.701-6.583 5.802-9.872 13.218-9.872 22.254 0 8.256 3.568 15.033 10.709 20.329 7.137 5.3 19.463 10.905 36.977 16.815 26.773 7.588 47.186 17.487 61.24 29.701 14.056 12.214 21.083 28.306 21.083 48.272 0 20.861-8.144 37.314-24.428 49.36-16.288 12.048-37.816 18.071-64.587 18.071-26.215 0-48.72-6.525-67.515-19.577-18.798-13.051-27.916-32.514-27.357-58.395l.335-1.004h47.352c0 14.39 4.238 24.988 12.716 31.791 8.477 6.806 19.966 10.207 34.469 10.207 13.052 0 23.007-2.732 29.867-8.199 6.86-5.465 10.29-12.771 10.29-21.919M674.041 166.486l.334 1.004c.443 25.993-7.475 46.349-23.76 61.073-16.288 14.724-38.763 22.086-67.43 22.086-29.227 0-52.82-9.395-70.778-28.193-17.962-18.795-26.938-43.086-26.938-72.87V101.23c0-29.67 8.755-53.961 26.269-72.868C529.248 9.454 552.229 0 580.675 0c29.67 0 52.874 7.253 69.605 21.752 16.733 14.502 24.873 34.916 24.43 61.239l-.335 1.005h-47.52c0-15.615-3.764-27.245-11.293-34.887-7.53-7.64-19.159-11.462-34.887-11.462-14.615 0-26.019 5.885-34.218 17.653-8.198 11.769-12.298 26.968-12.298 45.595v48.69c0 18.74 4.321 34.025 12.968 45.847 8.642 11.826 20.664 17.737 36.058 17.737 14.611 0 25.516-3.821 32.711-11.462 7.195-7.64 10.792-19.38 10.792-35.222h47.353zM848.558 140.049h-90.354v69.606h107.42v37.48H709.346V3.514H865.29v37.648H758.204v61.24h90.354v37.647zM1096.86 247.135h-48.858l-98.218-164.31-1.004.167v164.143h-48.858V3.514h48.858l98.218 164.143 1.004-.168V3.514h48.858v243.621zM1268.7 183.553c0-9.37-3.263-16.899-9.787-22.589-6.525-5.689-17.987-11.043-34.385-16.062-28.11-8.477-49.443-18.461-64.001-29.952-14.556-11.488-21.836-27.16-21.836-47.017 0-19.966 8.199-36.279 24.597-48.942C1179.685 6.332 1200.601 0 1226.033 0c26.994 0 48.717 6.806 65.172 20.413 16.452 13.611 24.4 31.457 23.845 53.544l-.336 1.004h-47.352c0-12.157-3.681-21.501-11.043-28.027-7.362-6.526-17.681-9.788-30.954-9.788-12.048 0-21.363 2.902-27.943 8.701-6.585 5.802-9.872 13.218-9.872 22.254 0 8.256 3.567 15.033 10.709 20.329 7.135 5.3 19.462 10.905 36.977 16.815 26.772 7.588 47.186 17.487 61.24 29.701 14.056 12.214 21.083 28.306 21.083 48.272 0 20.861-8.144 37.314-24.429 49.36-16.289 12.048-37.816 18.071-64.586 18.071-26.216 0-48.721-6.525-67.515-19.577-18.799-13.051-27.918-32.514-27.357-58.395l.335-1.004h47.351c0 14.39 4.238 24.988 12.717 31.791 8.476 6.806 19.966 10.207 34.469 10.207 13.051 0 23.007-2.732 29.866-8.199 6.86-5.465 10.29-12.771 10.29-21.919M1501.95 103.07c0-18.962-4.742-34.522-14.222-46.683-9.482-12.157-22.588-18.238-39.32-18.238-16.511 0-29.366 6.081-38.568 18.238-9.203 12.161-13.804 27.721-13.804 46.683v44.173c0 19.301 4.626 35.028 13.888 47.185 9.257 12.161 22.196 18.239 38.818 18.239 16.732 0 29.784-6.078 39.154-18.239 9.369-12.157 14.054-27.884 14.054-47.185V103.07zm48.692 44.173c0 30.009-9.428 54.744-28.277 74.207-18.853 19.468-43.396 29.198-73.623 29.198-30.117 0-54.547-9.759-73.286-29.281-18.74-19.519-28.11-44.228-28.11-74.124v-43.838c0-29.783 9.34-54.463 28.026-74.041C1394.054 9.788 1418.398 0 1448.408 0c30.227 0 54.823 9.788 73.789 29.364 18.962 19.578 28.445 44.258 28.445 74.041v43.838zM1638.15 112.107h34.636c13.72 0 23.927-2.898 30.62-8.701 6.692-5.799 10.039-14.39 10.039-25.768 0-11.153-3.376-20.021-10.123-26.604-6.751-6.58-16.649-9.872-29.699-9.872h-35.473v70.945zm0 37.646v97.382h-48.858V3.514h84.331c27.774 0 49.498 6.332 65.172 18.991 15.668 12.663 23.508 30.315 23.508 52.958 0 12.496-3.322 23.287-9.956 32.376-6.638 9.094-16.314 16.428-29.03 22.004 14.39 4.241 24.734 11.324 31.039 21.25 6.3 9.929 9.453 22.2 9.453 36.811v17.902c0 6.807.92 13.918 2.762 21.334 1.839 7.42 4.989 12.914 9.453 16.482v3.513h-50.364c-4.464-3.568-7.337-9.479-8.618-17.735-1.285-8.254-1.923-16.23-1.923-23.928v-17.234c0-12.156-3.323-21.61-9.956-28.361-6.639-6.747-16.038-10.124-28.194-10.124h-38.819z"
                    fill="#fcfcfc" fill-rule="nonzero"></path>
                <path
                    d="M116.944 187.32h.164c10.258 15.68 21.496 31.239 31.446 46.686-4.437-.211-9.03-.264-13.616-.325 1.016 4.172 2.865 8.914 4.053 13.454h-10.536c-1.042-3.497-2.179-6.898-3.241-10.374-4.144 2.666-8.426 6.598-12.646 9.727v-1.135c1.609-19.193 2.948-38.657 4.376-58.033"
                    fill="#fcfcfc"></path>
                <path
                    d="M153.266 3.514h-.435l.218.514.217-.514zM102.803 3.514h-.569L0 247.135h50.03l77.881-183.787-25.108-59.834z"
                    fill="#fcfcfc" fill-rule="nonzero" opacity=".85"></path>
                <path d="M205.037 247.135h51.033L152.832 3.514h-50.029l102.234 243.621z" fill="#fcfcfc"
                    fill-rule="nonzero">
                </path>
            </svg>
        </div>

        <!-- Navigation & User Section -->
        <div class="flex space-x-4 items-center">
            <!-- User Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" class="h-6 w-6 text-white">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M15.75 7.5a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0zM4.5 19.5a8.25 8.25 0 0 1 15 0" />
            </svg>

            <!-- Username -->
            <span class="text-white font-medium">{{ user.user.name }}</span>

            <!-- Logout Button -->
            <button class="flex items-center space-x-2 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded"
                @click="logout">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="h-5 w-5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-7.5A2.25 2.25 0 0 0 3.75 5.25v13.5A2.25 2.25 0 0 0 6 21h7.5a2.25 2.25 0 0 0 2.25-2.25V15m4.5-3h-9m9 0-3 3m3-3-3-3" />
                </svg>
                <span>Logout</span>
            </button>
        </div>
    </header>
    <!-- header end -->
    <flash ref="refFlash" />
    <loader ref="refLoading" />
</template>

<script setup>
import { ref } from "vue";
import { useAuthStore } from "@/store/AuthStore";
import Flash from "./Flash.vue";
import Loader from "./Loading.vue";

const authStore = useAuthStore();
const user = authStore.getUser;
const refFlash = ref('');
const refLoading = ref('');

const logout = async () => {
    refLoading.value.loader(true);
    refFlash.value.flash("User Logout successfully", 'success');
    authStore.setUser([])
    localStorage.clear();
    setTimeout(() => {
        refLoading.value.loader(false);
         window.location.href = '/'
    }, 2000);
}
</script>